$(function(){var k=$("#sender"),a=$("#senderPhone"),d=$("#senderAddress"),i=$("#receiver"),c=$("#receivePhone"),f=$("#receiveAddress"),b=$("#sendContent"),e=$("#sendStory");$("#btnSubmit").click(function(){var l=j();if(!h(l)){return}$.cover("open","数据处理中...");$.ajax({url:"/ajax/submitOrder.php",type:"POST",dataType:"json",data:l,success:function(m){if(m.retFlag==1){$.cover("alert","提交成功！",g)}else{$.cover("alert","提交失败！",g)}},error:function(o,p,n){$.error(p)}})});function h(l){if(l.sender.length==0||l.sender.length>10){$.cover("alert","寄件人姓名不能为空，且长度不能超过10个字符。",function(){k.focus().select()});return false}if(!/^\d{1,20}$/.test(l.senderPhone)){$.cover("alert","寄件人联系电话不能为空，且长度不能超过20个数字。",function(){a.focus().select()});return false}if(l.senderAddress.length>50){$.cover("alert","寄件人地址长度不能超过50个字符。",function(){d.focus().select()});return false}if(l.receiver.length>10){$.cover("alert","收件人姓名长度不能超过10个字符。",function(){i.focus().select()});return false}if(!/^\d{0,20}$/.test(l.receivePhone)){$.cover("alert","收件人联系电话长度不能超过20个数字。",function(){c.focus().select()});return false}if(l.receiveAddress.length>50){$.cover("alert","收件人地址长度不能超过50个字符。",function(){f.focus().select()});return false}if(l.sendContent.length==0||l.sendContent.length>30){$.cover("alert","投寄内容不能为空，且长度不能超过30个字符。",function(){b.focus().select()});return false}if(l.sendStory.length==0||l.sendStory.length>400){$.cover("alert","投寄内容背景故事不能为空，且长度不能超过400个字符。",function(){e.focus().select()});return false}return true}function g(){$(".order input,.order textarea").each(function(l,m){$(m).val("")})}function j(){return{sender:$.trim(k.val()),senderPhone:$.trim(a.val()),senderAddress:$.trim(d.val()),receiver:$.trim(i.val()),receivePhone:$.trim(c.val()),receiveAddress:$.trim(f.val()),sendContent:$.trim(b.val()),sendStory:$.trim(e.val())}}});